{{ '//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js' | script_tag }}
{{ 'api.jquery.js' | shopify_asset_url | script_tag }}

<div class="wrap">
    {% paginate collection.products by 24 %}
    <header role="banner" class="collection-header">
        <h1 class="collection-title">{{ collection.title }}</h1>
        <p class="collection-description">
        {{ collection.metafields.collection_info.collection_description }}
        </p>
    </header>

    <main class="grid">
        {% for product in collection.products %}
        <div class="grid__item medium-up--one-third one-whole product-card-wrap" data-collection-item="{{ forloop.index0 }}">
          <div class="product-card">
          <script type="text/javascript">
              $('.quickshop-open-{{ forloop.index0 }}').click(function(){
                  console.log('lol')
                  $('.quickshop-root-{{ forloop.index0 }}').toggle();
              });
          </script>
          <div class="quickshop-open-{{ forloop.index0 }}" style="width: 200px; height 100px; background-color: blue;">
              SHOW QUICKSHOP
          </div>
          <div class="quickshop-root quickshop-root-{{ forloop.index0 }}">
              <div class="quickshop-close">
                  CLOSE X
              </div>
              {% include 'quickshop' %}
          </div>
            {% if product.featured_image != blank %}
              <a href="{{ product.url | within: collection }}">
                  <img src="{{product.featured_image.src | img_url : '480x480'}}" alt="{{ product.featured_image.alt }}">
              </a>
            {% endif %}
            <a href="{{ product.url | within: collection }}">
                <p class="product-card-title">{{ product.title }}</p>
            </a>
            <p class="product-card-price">
                {% if product.compare_at_price > product.price %}
                  {% if product.price_varies %}
                    {%- assign sale_price = product.price | money -%}
                    {{ product.price | money | remove: '.00'}}
                  {% else %}
                    {{ 'products.product.on_sale' | t }}
                    {{ product.price | money | remove: '.00'}}
                  {% endif %}
                  {% else %}
                  {% if product.price_varies %}
                    {%- assign price = product.price | money -%}
                    {{ product.price_max | money | remove: '.00'}}
                  {% else %}
                    {{ product.price | money | remove: '.00'}}
                  {% endif %}
                {% endif %} {% if product.compare_at_price > product.price %}
                <span class="visually-hidden">{{ 'products.product.regular_price' | t }}</span>
                <s>{{ product.compare_at_price | money }}</s> {% endif %} {% unless product.available %} {{ 'products.product.sold_out' | t }} {% endunless %}
            </p>
          </div>
        </div>

        {% else %} {% if collection.handle == 'all' and collection.all_vendors.size == 0 and collection.all_types.size == 0 %} {% for i in (1..8) %}
        <a href="#">
            {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}
            {{ 'product-' | append: current | placeholder_svg_tag: 'placeholder-svg placeholder-svg--small' }}
          </a>
        <p>
            <a href="#">{{ 'homepage.onboarding.product_title' | t }}</a>
        </p>
        <p>
            {{ 1999 | money }}
        </p>
        {% endfor %} {% else %}
        <p>{{ 'collections.general.no_matches' | t }}</p>
        {% endif %} {% endfor %}
    </main>

    {% if paginate.pages > 1 %} {% include 'pagination' %} {% endif %} {% endpaginate %}
</div>
